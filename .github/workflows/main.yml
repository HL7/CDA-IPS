name: Validate docs

on:
  push:
    branches: [ main ]
  pull_request:
    types: [opened, synchronize] # This will trigger the workflow only when a PR is opened or updated with new commits

jobs:
  sushi:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          path: profiles

      - name: Update FHIR Profiles
        uses: cybernop/build-fhir-profiles@v1
        with:
          sushi-version: "3.11.0"
          project-dir: profiles

#  ig-publisher:
#    runs-on: ubuntu-latest
#
#    steps:
#      - uses: actions/checkout@v3
#
#      - name: Install Jekyll
#        run: gem install jekyll
#
#      - name: Install Sushi
#        run: npm install -g fsh-sushi
#
#      - name: Install IG publisher
#        run: |
#          chmod +x ./_updatePublisher.sh
#          ./_updatePublisher.sh -y
#
#      - name: Validate IG
#        run: |
#          chmod +x ./_genonce.sh
#          ./_genonce.sh
