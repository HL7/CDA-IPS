name: Validate docs

on:
  push:
    branches: [ main ]
    paths:
      - "**.fsh"
      - "**/sushi-config.yaml"
  workflow_dispatch:
  
jobs:
  build-profiles:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          path: profiles

      - name: Update FHIR Profiles
        uses: cybernop/build-fhir-profiles@v1
        with:
          sushi-version: "3.11.0"
          project-dir: profiles

      - name: Push built Profiles
        uses: cybernop/push-fsh-profiles@v1
        with:
          project-dir: profiles


#  ig-publisher:
#    runs-on: ubuntu-latest
#
#    steps:
#      - uses: actions/checkout@v3
#
#      - name: Install Jekyll
#        run: gem install jekyll
#
#      - name: Install Sushi
#        run: npm install -g fsh-sushi
#
#      - name: Install IG publisher
#        run: |
#          chmod +x ./_updatePublisher.sh
#          ./_updatePublisher.sh -y
#
#      - name: Validate IG
#        run: |
#          chmod +x ./_genonce.sh
#          ./_genonce.sh
