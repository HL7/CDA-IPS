<StructureDefinition xmlns="http://hl7.org/fhir">
    <!--This is an experimental service for conversion of compliant Template ITS templates to FHIR 
        StructureDefinitions. You can current do one template at a time. Parameters:
        id              - required. Template id
        effectiveDate   - optional. Template effectiveDate (yyyy-mm-ddThh:mm:ss). Does latest version if omitted
        
        Handles: desc | constraint | element | assert | include | choice | vocabulary | property
        
        TODO: slicing, multiple value set bindings, inline value sets (repetitions of vocabulary with code/codeSystem), 
              languages (when multiple desc | constraints exist), other namespaced elements/attributes 
              (extension: http://hl7.org/fhir/StructureDefinition/elementdefinition-namespace with valueUri)
              
        Part of the TODOs need resolution in Template ITS and parts need resolution in FHIR. These are brought forward there.
        -->
    <id value="2.16.840.1.113883.10.21.4.6--20230130093600"/>
    <meta>
        <profile value="http://hl7.org/fhir/4.0/StructureDefinition/StructureDefinition"/>
    </meta>
    <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-namespace">
        <valueUri value="urn:hl7-org:v3"/>
    </extension>
    <extension url="http://hl7.org/fhir/StructureDefinition/resource-effectivePeriod">
        <valuePeriod>
            <start value="2023-01-30T09:36:00+02:00"/>
        </valuePeriod>
    </extension>
    <url value="http://art-decor.org/fhir/StructureDefinition/2.16.840.1.113883.10.21.4.6--20230130093600"/>
    <identifier>
        <use value="official"/>
        <system value="urn:ietf:rfc:3986"/>
        <value value="urn:oid:2.16.840.1.113883.10.21.4.6"/>
    </identifier>
    <version value="2023-01-30T09:36:00"/>
    <name value="UVSubordinateadministration"/>
    <title value="UV Subordinate Substance Administration"/>
    <status value="draft"/>
    <experimental value="false"/>
    <date value="2023-01-30T09:36:00Z"/>
    <publisher value="HL7 International"/>
    <contact>
        <name value=""/>
        <telecom>
            <system value="phone"/>
            <value value="+1 734 677 7777 "/>
        </telecom>
        <telecom>
            <system value="email"/>
            <value value="info@hl7.org"/>
        </telecom>
    </contact>
    <description value="Universal Subordinate Substance Administration to convey information about dosages"/>
    <kind value="logical"/>
    <abstract value="false"/>
    <type value="http://hl7.org/cda/stds/core/StructureDefinition/SubstanceAdministration"/>
    <baseDefinition value="http://hl7.org/cda/stds/core/StructureDefinition/SubstanceAdministration"/>
    <derivation value="constraint"/>
    <differential>
        <element id="SubstanceAdministration">
            <path value="SubstanceAdministration"/>
            <definition value="The moodCode of this subordinate substance administration SHALL be the same of the parent substance administration"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.classCode">
            <path value="SubstanceAdministration.classCode"/>
            <representation value="xmlAttr"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="code"/>
            </type>
            <fixedString value="SBADM"/>
        </element>
        <element id="SubstanceAdministration.moodCode">
            <path value="SubstanceAdministration.moodCode"/>
            <representation value="xmlAttr"/>
            <definition value="If the subordinate substance administration refers to Medication Order then a substance administration request (moodCode is 'RQO') is used.  If it refers to a Medication Statement, the moodCode shall be set to event/intent (moodCode is 'EVN' or 'INT')."/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="code"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Mood Code Evn Int Rqo"/>
                <valueSet value="http://localhost:8877/exist/apps/fhir/ValueSet/2.16.840.1.113883.11.21.4--20180321000000"/>
            </binding>
        </element>
        <element id="SubstanceAdministration.templateId">
            <path value="SubstanceAdministration.templateId"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="root"/>
                </discriminator>
                <discriminator>
                    <type value="value"/>
                    <path value="extension"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <min value="1"/>
        </element>
        <element id="SubstanceAdministration.templateId:primary">
            <path value="SubstanceAdministration.templateId"/>
            <min value="1"/>
            <max value="1"/>
            <sliceName value="primary"/>
            <type>
                <code value="http://hl7.org/cda/stds/core/StructureDefinition/II"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.templateId:primary.root">
            <path value="SubstanceAdministration.templateId.root"/>
            <representation value="xmlAttr"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="string"/>
            </type>
            <fixedString value="2.16.840.1.113883.10.21.4.6"/>
        </element>
        <element id="SubstanceAdministration.statusCode">
            <path value="SubstanceAdministration.statusCode"/>
            <definition value="The statusCode of this subordinate substance administration SHALL be the same of that of the parent substance administration."/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
            <binding>
                <strength value="required"/>
                <description value="ActStatusActiveCompletedAbortedSuspended"/>
                <valueSet value="http://localhost:8877/exist/apps/fhir/ValueSet/2.16.840.1.113883.11.21.2--20170306000000"/>
            </binding>
        </element>
        <element id="SubstanceAdministration.event">
            <path value="SubstanceAdministration.event"/>
            <min value="0"/>
            <max value="1"/>
        </element>
        <element id="SubstanceAdministration.event.code">
            <path value="SubstanceAdministration.event.code"/>
            <representation value="xmlAttr"/>
            <min value="0"/>
            <max value="1"/>
            <type>
                <code value="code"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="TimingEvent"/>
                <valueSet value="http://terminology.hl7.org/ValueSet/v3-TimingEvent"/>
            </binding>
        </element>
        <element id="SubstanceAdministration.doseQuantity">
            <path value="SubstanceAdministration.doseQuantity"/>
            <definition
                value="The doseQuantity describes the amount of the medication given (the dosage).&#xA;&#xA;If a dose range is given (e.g., 1-2 tablets, or 325-750mg), then the &lt;low&gt; and &lt;high&gt; bounds are specified in their respective elements; otherwise only one physical quantity is specified (e.g. 2 drops) &#xA;&#xA;The dose can be in some known and measurable unit, such as grams, milligrams,or described in &#34;administration&#34; units (unit of presentation, such as capsules). &#xA;&#xA;If the dose is in countable items (tablets, caplets, &#34;eaches&#34;), then the unit could be omitted or valorized using the UCUM annotations for describing the type of                         countable items (e.g. .{tablet}, {puff},..). &#xA;&#xA;The unit attribute – when expresses unit of measures- shall be derived from the UCUM code system. &#xA;The used elements should contain a &lt;translation&gt; element that provides a reference to the originalText found in the narrative body of the document."/>
            <min value="0"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.doseQuantity.unit">
            <path value="SubstanceAdministration.doseQuantity.unit"/>
            <representation value="xmlAttr"/>
            <min value="0"/>
            <max value="1"/>
            <type>
                <code value="code"/>
            </type>
        </element>
        <element id="SubstanceAdministration.rateQuantity">
            <path value="SubstanceAdministration.rateQuantity"/>
            <min value="0"/>
            <max value="1"/>
        </element>
        <element id="SubstanceAdministration.maxDoseQuantity">
            <path value="SubstanceAdministration.maxDoseQuantity"/>
            <min value="0"/>
            <max value="1"/>
        </element>
        <element id="SubstanceAdministration.administrationUnitCode">
            <path value="SubstanceAdministration.administrationUnitCode"/>
            <min value="0"/>
            <max value="1"/>
            <binding>
                <strength value="required"/>
                <description value="AdministrableDrugForm"/>
                <valueSet value="urn:oid:2.16.840.1.113883.1.11.14570"/>
            </binding>
        </element>
        <element id="SubstanceAdministration.consumable">
            <path value="SubstanceAdministration.consumable"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.consumable.manufacturedProduct">
            <path value="SubstanceAdministration.consumable.manufacturedProduct"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.consumable.manufacturedProduct.manufacturedMaterial">
            <path value="SubstanceAdministration.consumable.manufacturedProduct.manufacturedMaterial"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="SubstanceAdministration.consumable.manufacturedProduct.manufacturedMaterial.nullFlavor">
            <path value="SubstanceAdministration.consumable.manufacturedProduct.manufacturedMaterial.nullFlavor"/>
            <representation value="xmlAttr"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="code"/>
            </type>
            <fixedString value="NA"/>
        </element>
    </differential>
</StructureDefinition>
